import{r as m,G as e}from"./index-Gqy7a80Z.js";import{F as i}from"./index-DQ5IH1DV.js";import{ae as n,L as b,af as j,ag as P}from"./index-Dn3wCLmq.js";import{D as u}from"./index-CO2Ul_Wc.js";import{B as p}from"./button-yQPWasjd.js";import{I as c}from"./index-BSuUmI08.js";import{S as x}from"./index-DovZl_eG.js";import"./responsiveObserver-qv2j3wkL.js";import"./EyeOutlined-BSh2KQs6.js";const{Title:a,Paragraph:d,Text:o}=P,{Option:r}=x;function R(){const[t,h]=m.useState("default"),[f]=i.useForm();m.useEffect(()=>{"Notification"in window&&h(Notification.permission)},[]);const w=async()=>{if("Notification"in window){const s=await Notification.requestPermission();h(s)}},g=s=>{if("Notification"in window&&t==="granted"){const I={body:s.body,icon:s.icon||"https://vitejs.dev/logo.svg",dir:s.dir||"auto",silent:s.silent},l=new Notification(s.title,I);l.onclick=()=>{console.log("通知被点击了"),window.focus()},l.onclose=()=>{console.log("通知被关闭了")},l.onerror=N=>{console.error("通知出错:",N)}}},y=()=>{switch(t){case"granted":return e.jsx(n,{type:"success",message:"已获得通知权限，可以发送通知",showIcon:!0});case"denied":return e.jsx(n,{type:"error",message:"通知权限已被拒绝",description:"请在浏览器设置中修改通知权限设置",showIcon:!0});default:return e.jsx(n,{type:"info",message:"尚未请求通知权限",description:"点击下方按钮请求权限",showIcon:!0})}},v="Notification"in window;return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[e.jsx(a,{level:2,children:"浏览器通知功能演示"}),v?e.jsxs(e.Fragment,{children:[y(),e.jsx(u,{}),e.jsxs(b,{direction:"vertical",style:{width:"100%"},children:[t!=="granted"&&e.jsx(p,{type:"primary",onClick:w,disabled:t==="denied",children:"请求通知权限"}),t==="granted"&&e.jsx(j,{title:"发送自定义通知",children:e.jsxs(i,{form:f,onFinish:g,initialValues:{title:"通知标题",body:"这是通知的内容，可以包含详细信息",icon:"https://vitejs.dev/logo.svg",dir:"auto",silent:!1},layout:"vertical",children:[e.jsx(i.Item,{name:"title",label:"标题",rules:[{required:!0}],children:e.jsx(c,{placeholder:"请输入通知标题"})}),e.jsx(i.Item,{name:"body",label:"内容",rules:[{required:!0}],children:e.jsx(c.TextArea,{rows:3,placeholder:"请输入通知内容"})}),e.jsx(i.Item,{name:"icon",label:"图标URL",children:e.jsx(c,{placeholder:"请输入图标URL"})}),e.jsx(i.Item,{name:"dir",label:"文字方向",children:e.jsxs(x,{children:[e.jsx(r,{value:"auto",children:"自动"}),e.jsx(r,{value:"ltr",children:"从左到右"}),e.jsx(r,{value:"rtl",children:"从右到左"})]})}),e.jsx(i.Item,{name:"silent",label:"静音模式",children:e.jsxs(x,{children:[e.jsx(r,{value:!0,children:"启用"}),e.jsx(r,{value:!1,children:"禁用"})]})}),e.jsx(i.Item,{children:e.jsx(p,{type:"primary",htmlType:"submit",children:"发送通知"})})]})})]}),e.jsx(u,{}),e.jsxs(j,{title:"通知API使用说明",children:[e.jsxs(d,{children:[e.jsx(o,{strong:!0,children:"Notification API"})," ","允许网页应用程序在用户不与网页交互时发送通知。"]}),e.jsx(a,{level:4,children:"基本使用方法："}),e.jsx(d,{children:e.jsxs("ol",{children:[e.jsxs("li",{children:["检查浏览器是否支持：",e.jsx(o,{code:!0,children:'if ("Notification" in window) {...}'})]}),e.jsxs("li",{children:["请求权限：",e.jsx(o,{code:!0,children:"Notification.requestPermission().then(permission => {...})"})]}),e.jsxs("li",{children:["发送通知：",e.jsx(o,{code:!0,children:'new Notification("标题", {body: "内容"})'})]})]})}),e.jsx(a,{level:4,children:"注意事项："}),e.jsx(d,{children:e.jsxs("ul",{children:[e.jsx("li",{children:"必须先获取用户授权才能发送通知"}),e.jsx("li",{children:"应当避免过多发送通知造成骚扰"}),e.jsx("li",{children:"在不同的设备和操作系统上，通知的外观会有所不同"}),e.jsx("li",{children:"部分参数在某些平台上可能不被支持"})]})})]})]}):e.jsx(n,{type:"warning",message:"您的浏览器不支持通知功能",description:"请尝试使用Chrome、Firefox、Safari等现代浏览器",showIcon:!0})]})}export{R as default};
