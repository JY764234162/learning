import{r as h,j as i,T as b,B as j}from"../../main-DW6fm0rT.js";import{F as e}from"./index-Di17G1YV.js";import{A as o}from"./index-sLMO7Dxs.js";import{D as p}from"./index-kr04UTMv.js";import{S}from"./index-CJaqqdSo.js";import{C as u}from"./index-CZmLImwT.js";import{I as c}from"./index-B-HtfW1y.js";import{S as m}from"./index-C6bbO9Vb.js";import"./row-Dqd8b6VP.js";import"./index-nabA5kAi.js";import"./useBreakpoint-B4tqKLMD.js";import"./useForceUpdate-LUOdSzUN.js";import"./ExclamationCircleFilled-Dww69ole.js";import"./InfoCircleFilled-Cd0jSmYn.js";import"./Input-Ui521ZBd.js";import"./EyeOutlined-Cak1y9m_.js";import"./SearchOutlined-CCYBn9BO.js";const{Title:d,Paragraph:a,Text:n}=b,{Option:r}=m;function G(){const[s,x]=h.useState("default"),[f]=e.useForm();h.useEffect(()=>{"Notification"in window&&x(Notification.permission)},[]);const w=async()=>{if("Notification"in window){const t=await Notification.requestPermission();x(t)}},g=t=>{if("Notification"in window&&s==="granted"){const I={body:t.body,icon:t.icon||"https://vitejs.dev/logo.svg",dir:t.dir||"auto",silent:t.silent},l=new Notification(t.title,I);l.onclick=()=>{console.log("通知被点击了"),window.focus()},l.onclose=()=>{console.log("通知被关闭了")},l.onerror=N=>{console.error("通知出错:",N)}}},y=()=>{switch(s){case"granted":return i.jsx(o,{type:"success",message:"已获得通知权限，可以发送通知",showIcon:!0});case"denied":return i.jsx(o,{type:"error",message:"通知权限已被拒绝",description:"请在浏览器设置中修改通知权限设置",showIcon:!0});default:return i.jsx(o,{type:"info",message:"尚未请求通知权限",description:"点击下方按钮请求权限",showIcon:!0})}},v="Notification"in window;return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[i.jsx(d,{level:2,children:"浏览器通知功能演示"}),v?i.jsxs(i.Fragment,{children:[y(),i.jsx(p,{}),i.jsxs(S,{direction:"vertical",style:{width:"100%"},children:[s!=="granted"&&i.jsx(j,{type:"primary",onClick:w,disabled:s==="denied",children:"请求通知权限"}),s==="granted"&&i.jsx(u,{title:"发送自定义通知",children:i.jsxs(e,{form:f,onFinish:g,initialValues:{title:"通知标题",body:"这是通知的内容，可以包含详细信息",icon:"https://vitejs.dev/logo.svg",dir:"auto",silent:!1},layout:"vertical",children:[i.jsx(e.Item,{name:"title",label:"标题",rules:[{required:!0}],children:i.jsx(c,{placeholder:"请输入通知标题"})}),i.jsx(e.Item,{name:"body",label:"内容",rules:[{required:!0}],children:i.jsx(c.TextArea,{rows:3,placeholder:"请输入通知内容"})}),i.jsx(e.Item,{name:"icon",label:"图标URL",children:i.jsx(c,{placeholder:"请输入图标URL"})}),i.jsx(e.Item,{name:"dir",label:"文字方向",children:i.jsxs(m,{children:[i.jsx(r,{value:"auto",children:"自动"}),i.jsx(r,{value:"ltr",children:"从左到右"}),i.jsx(r,{value:"rtl",children:"从右到左"})]})}),i.jsx(e.Item,{name:"silent",label:"静音模式",children:i.jsxs(m,{children:[i.jsx(r,{value:!0,children:"启用"}),i.jsx(r,{value:!1,children:"禁用"})]})}),i.jsx(e.Item,{children:i.jsx(j,{type:"primary",htmlType:"submit",children:"发送通知"})})]})})]}),i.jsx(p,{}),i.jsxs(u,{title:"通知API使用说明",children:[i.jsxs(a,{children:[i.jsx(n,{strong:!0,children:"Notification API"})," ","允许网页应用程序在用户不与网页交互时发送通知。"]}),i.jsx(d,{level:4,children:"基本使用方法："}),i.jsx(a,{children:i.jsxs("ol",{children:[i.jsxs("li",{children:["检查浏览器是否支持：",i.jsx(n,{code:!0,children:'if ("Notification" in window) {...}'})]}),i.jsxs("li",{children:["请求权限：",i.jsx(n,{code:!0,children:"Notification.requestPermission().then(permission => {...})"})]}),i.jsxs("li",{children:["发送通知：",i.jsx(n,{code:!0,children:'new Notification("标题", {body: "内容"})'})]})]})}),i.jsx(d,{level:4,children:"注意事项："}),i.jsx(a,{children:i.jsxs("ul",{children:[i.jsx("li",{children:"必须先获取用户授权才能发送通知"}),i.jsx("li",{children:"应当避免过多发送通知造成骚扰"}),i.jsx("li",{children:"在不同的设备和操作系统上，通知的外观会有所不同"}),i.jsx("li",{children:"部分参数在某些平台上可能不被支持"})]})})]})]}):i.jsx(o,{type:"warning",message:"您的浏览器不支持通知功能",description:"请尝试使用Chrome、Firefox、Safari等现代浏览器",showIcon:!0})]})}export{G as default};
