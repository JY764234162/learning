import{bC as te,bD as oe,bE as ie,bF as se,bG as le,bH as H,bI as ue,bJ as ae,F as ne,bK as re,bL as ce,bM as fe,bN as ve,bO as G,aQ as he,r as V,j as l,T as de}from"../../main-BdssBdaK.js";import{A as me}from"./index-DP0mdh1e.js";import{S as U}from"./index-RcpCfIRg.js";import{C as S}from"./index-CqsQUBG0.js";import{I as ge}from"./index-C2NPSFB8.js";import"./ExclamationCircleFilled-CzleENMA.js";import"./InfoCircleFilled-krVInnJ3.js";import"./Input-CAIDGnEc.js";import"./EyeOutlined-D8UNOCuo.js";import"./SearchOutlined-Bwn__wnW.js";const pe=n=>{const e=n?.algorithm?te(n.algorithm):oe,r=Object.assign(Object.assign({},ie),n?.token);return se(r,{override:n?.token},e,le)};function xe(n){const{sizeUnit:e,sizeStep:r}=n,t=r-2;return{sizeXXL:e*(t+10),sizeXL:e*(t+6),sizeLG:e*(t+2),sizeMD:e*(t+2),sizeMS:e*(t+1),size:e*t,sizeSM:e*t,sizeXS:e*(t-1),sizeXXS:e*(t-1)}}const Ce=(n,e)=>{const r=e??H(n),t=r.fontSizeSM,i=r.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),xe(e??n)),ue(t)),{controlHeight:i}),ae(Object.assign(Object.assign({},r),{controlHeight:i})))},m=(n,e)=>new ne(n).setA(e).toRgbString(),T=(n,e)=>new ne(n).lighten(e).toHexString(),ye=n=>{const e=re(n,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},je=(n,e)=>{const r=n||"#000",t=e||"#fff";return{colorBgBase:r,colorTextBase:t,colorText:m(t,.85),colorTextSecondary:m(t,.65),colorTextTertiary:m(t,.45),colorTextQuaternary:m(t,.25),colorFill:m(t,.18),colorFillSecondary:m(t,.12),colorFillTertiary:m(t,.08),colorFillQuaternary:m(t,.04),colorBgSolid:m(t,.95),colorBgSolidHover:m(t,1),colorBgSolidActive:m(t,.9),colorBgElevated:T(r,12),colorBgContainer:T(r,8),colorBgLayout:T(r,0),colorBgSpotlight:T(r,26),colorBgBlur:m(t,.04),colorBorder:T(r,26),colorBorderSecondary:T(r,19)}},Te=(n,e)=>{const r=Object.keys(ce).map(i=>{const o=re(n[i],{theme:"dark"});return Array.from({length:10},()=>1).reduce((s,a,u)=>(s[`${i}-${u+1}`]=o[u],s[`${i}${u+1}`]=o[u],s),{})}).reduce((i,o)=>(i=Object.assign(Object.assign({},i),o),i),{}),t=e??H(n);return Object.assign(Object.assign(Object.assign({},t),r),fe(n,{generateColorPalettes:ye,generateNeutralColorPalettes:je}))};function ze(){const[n,e,r]=he();return{theme:n,token:e,hashId:r}}const Oe={defaultSeed:G.token,useToken:ze,defaultAlgorithm:H,darkAlgorithm:Te,compactAlgorithm:Ce,getDesignToken:pe,defaultConfig:G,_internalContext:ve};function g(){}g.prototype={diff:function(e,r){var t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var s=this;function a(h){return h=s.postProcess(h,i),o?(setTimeout(function(){o(h)},0),!0):h}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var u=r.length,f=e.length,c=1,v=u+f;i.maxEditLength!=null&&(v=Math.min(v,i.maxEditLength));var y=(t=i.timeout)!==null&&t!==void 0?t:1/0,x=Date.now()+y,d=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(d[0],r,e,0,i);if(d[0].oldPos+1>=f&&p+1>=u)return a(Z(s,d[0].lastComponent,r,e,s.useLongestToken));var z=-1/0,O=1/0;function k(){for(var h=Math.max(z,-c);h<=Math.min(O,c);h+=2){var j=void 0,w=d[h-1],E=d[h+1];w&&(d[h-1]=void 0);var $=!1;if(E){var X=E.oldPos-h;$=E&&0<=X&&X<u}var Q=w&&w.oldPos+1<f;if(!$&&!Q){d[h]=void 0;continue}if(!Q||$&&w.oldPos<E.oldPos?j=s.addToPath(E,!0,!1,0,i):j=s.addToPath(w,!1,!0,1,i),p=s.extractCommon(j,r,e,h,i),j.oldPos+1>=f&&p+1>=u)return a(Z(s,j.lastComponent,r,e,s.useLongestToken));d[h]=j,j.oldPos+1>=f&&(O=Math.min(O,h-1)),p+1>=u&&(z=Math.max(z,h+1))}c++}if(o)(function h(){setTimeout(function(){if(c>v||Date.now()>x)return o();k()||h()},0)})();else for(;c<=v&&Date.now()<=x;){var B=k();if(B)return B}},addToPath:function(e,r,t,i,o){var s=e.lastComponent;return s&&!o.oneChangePerToken&&s.added===r&&s.removed===t?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:t,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:t,previousComponent:s}}},extractCommon:function(e,r,t,i,o){for(var s=r.length,a=t.length,u=e.oldPos,f=u-i,c=0;f+1<s&&u+1<a&&this.equals(t[u+1],r[f+1],o);)f++,u++,c++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!o.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,f},equals:function(e,r,t){return t.comparator?t.comparator(e,r):e===r||t.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],t=0;t<e.length;t++)e[t]&&r.push(e[t]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function Z(n,e,r,t,i){for(var o=[],s;e;)o.push(e),s=e.previousComponent,delete e.previousComponent,e=s;o.reverse();for(var a=0,u=o.length,f=0,c=0;a<u;a++){var v=o[a];if(v.removed)v.value=n.join(t.slice(c,c+v.count)),c+=v.count;else{if(!v.added&&i){var y=r.slice(f,f+v.count);y=y.map(function(x,d){var p=t[c+d];return p.length>x.length?p:x}),v.value=n.join(y)}else v.value=n.join(r.slice(f,f+v.count));f+=v.count,v.added||(c+=v.count)}}return o}function Y(n,e){var r;for(r=0;r<n.length&&r<e.length;r++)if(n[r]!=e[r])return n.slice(0,r);return n.slice(0,r)}function _(n,e){var r;if(!n||!e||n[n.length-1]!=e[e.length-1])return"";for(r=0;r<n.length&&r<e.length;r++)if(n[n.length-(r+1)]!=e[e.length-(r+1)])return n.slice(-r);return n.slice(-r)}function F(n,e,r){if(n.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+n.slice(e.length)}function N(n,e,r){if(!e)return n+r;if(n.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return n.slice(0,-e.length)+r}function L(n,e){return F(n,e,"")}function A(n,e){return N(n,e,"")}function W(n,e){return e.slice(0,we(n,e))}function we(n,e){var r=0;n.length>e.length&&(r=n.length-e.length);var t=e.length;n.length<e.length&&(t=n.length);var i=Array(t),o=0;i[0]=0;for(var s=1;s<t;s++){for(e[s]==e[o]?i[s]=i[o]:i[s]=o;o>0&&e[s]!=e[o];)o=i[o];e[s]==e[o]&&o++}o=0;for(var a=r;a<n.length;a++){for(;o>0&&n[a]!=e[o];)o=i[o];n[a]==e[o]&&o++}return o}var I="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ee=new RegExp("[".concat(I,"]+|\\s+|[^").concat(I,"]"),"ug"),b=new g;b.equals=function(n,e,r){return r.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n.trim()===e.trim()};b.tokenize=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(n),function(o){return o.segment})}else r=n.match(Ee)||[];var t=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?t.push(o):t.push(t.pop()+o):/\s/.test(i)?t[t.length-1]==i?t.push(t.pop()+o):t.push(i+o):t.push(o),i=o}),t};b.join=function(n){return n.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};b.postProcess=function(n,e){if(!n||e.oneChangePerToken)return n;var r=null,t=null,i=null;return n.forEach(function(o){o.added?t=o:o.removed?i=o:((t||i)&&K(r,i,t,o),r=o,t=null,i=null)}),(t||i)&&K(r,i,t,null),n};function Le(n,e,r){return b.diff(n,e,r)}function K(n,e,r,t){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],s=r.value.match(/^\s*/)[0],a=r.value.match(/\s*$/)[0];if(n){var u=Y(i,s);n.value=N(n.value,s,u),e.value=L(e.value,u),r.value=L(r.value,u)}if(t){var f=_(o,a);t.value=F(t.value,a,f),e.value=A(e.value,f),r.value=A(r.value,f)}}else if(r)n&&(r.value=r.value.replace(/^\s*/,"")),t&&(t.value=t.value.replace(/^\s*/,""));else if(n&&t){var c=t.value.match(/^\s*/)[0],v=e.value.match(/^\s*/)[0],y=e.value.match(/\s*$/)[0],x=Y(c,v);e.value=L(e.value,x);var d=_(L(c,x),y);e.value=A(e.value,d),t.value=F(t.value,c,d),n.value=N(n.value,c,c.slice(0,c.length-d.length))}else if(t){var p=t.value.match(/^\s*/)[0],z=e.value.match(/\s*$/)[0],O=W(z,p);e.value=A(e.value,O)}else if(n){var k=n.value.match(/\s*$/)[0],B=e.value.match(/^\s*/)[0],h=W(k,B);e.value=L(e.value,h)}}var De=new g;De.tokenize=function(n){var e=new RegExp("(\\r?\\n)|[".concat(I,"]+|[^\\S\\n\\r]+|[^").concat(I,"]"),"ug");return n.match(e)||[]};var P=new g;P.tokenize=function(n,e){e.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var r=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var i=0;i<t.length;i++){var o=t[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};P.equals=function(n,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),g.prototype.equals.call(this,n,e,r)};var be=new g;be.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var ke=new g;ke.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function R(n){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(n)}var D=new g;D.useLongestToken=!0;D.tokenize=P.tokenize;D.castInput=function(n,e){var r=e.undefinedReplacement,t=e.stringifyReplacer,i=t===void 0?function(o,s){return typeof s>"u"?r:s}:t;return typeof n=="string"?n:JSON.stringify(q(n,null,null,i),i,"  ")};D.equals=function(n,e,r){return g.prototype.equals.call(D,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function q(n,e,r,t,i){e=e||[],r=r||[],t&&(n=t(i,n));var o;for(o=0;o<e.length;o+=1)if(e[o]===n)return r[o];var s;if(Object.prototype.toString.call(n)==="[object Array]"){for(e.push(n),s=new Array(n.length),r.push(s),o=0;o<n.length;o+=1)s[o]=q(n[o],e,r,t,i);return e.pop(),r.pop(),s}if(n&&n.toJSON&&(n=n.toJSON()),R(n)==="object"&&n!==null){e.push(n),s={},r.push(s);var a=[],u;for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&a.push(u);for(a.sort(),o=0;o<a.length;o+=1)u=a[o],s[u]=q(n[u],e,r,t,u);e.pop(),r.pop()}else s=n;return s}var J=new g;J.tokenize=function(n){return n.slice()};J.join=J.removeEmpty=function(n){return n};const{Title:Be,Paragraph:M,Text:C}=de,{TextArea:ee}=ge;function He(){const{token:n}=Oe.useToken(),[e,r]=V.useState("beep boop"),[t,i]=V.useState("beep boob blah"),o=Le(e,t);console.log(o);const s=a=>a.map((u,f)=>{const c=u.added?n.colorSuccess:u.removed?n.colorError:"inherit",v=u.added?n.colorSuccessBg:u.removed?n.colorErrorBg:"transparent";return l.jsx("span",{style:{color:c,backgroundColor:v,padding:"0 4px",margin:"0 2px",borderRadius:"2px"},children:u.value},f)});return l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[l.jsx(Be,{level:2,children:"字符串差异对比"}),l.jsx(me,{type:"info",message:"什么是字符串差异对比？",description:"字符串差异对比是一种用于比较两段文本之间差异的工具。它能够精确地显示出文本中添加、删除或保持不变的部分，广泛应用于代码审查、文档版本控制等场景。",showIcon:!0,style:{marginBottom:"20px"}}),l.jsxs(U,{direction:"vertical",size:"large",style:{width:"100%"},children:[l.jsx(S,{title:"输入区域",children:l.jsxs(U,{direction:"vertical",style:{width:"100%"},children:[l.jsxs("div",{children:[l.jsx(C,{strong:!0,children:"文本 1："}),l.jsx(ee,{value:e,onChange:a=>r(a.target.value),rows:3,placeholder:"请输入第一段文本"})]}),l.jsxs("div",{children:[l.jsx(C,{strong:!0,children:"文本 2："}),l.jsx(ee,{value:t,onChange:a=>i(a.target.value),rows:3,placeholder:"请输入第二段文本"})]})]})}),l.jsx(S,{title:"对比结果",children:l.jsx("div",{className:"diff-result",children:s(o)})}),l.jsxs(S,{title:"功能说明",children:[l.jsx(M,{children:l.jsx(C,{strong:!0,children:"实现原理："})}),l.jsxs("ul",{children:[l.jsx("li",{children:"使用 diff 库进行文本差异分析"}),l.jsx("li",{children:"支持单词级别的差异对比"}),l.jsx("li",{children:"通过颜色标注展示修改内容"}),l.jsx("li",{children:"实时动态对比更新"})]}),l.jsx(M,{children:l.jsx(C,{strong:!0,children:"颜色说明："})}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx(C,{style:{backgroundColor:n.colorSuccessBg,color:n.colorSuccess},children:"绿色背景：新增内容"})}),l.jsx("li",{children:l.jsx(C,{style:{backgroundColor:n.colorErrorBg,color:n.colorError},children:"红色背景：删除内容"})}),l.jsx("li",{children:l.jsx(C,{children:"无背景：相同内容"})})]}),l.jsx(M,{children:l.jsx(C,{strong:!0,children:"应用场景："})}),l.jsxs("ul",{children:[l.jsx("li",{children:"文本版本对比"}),l.jsx("li",{children:"代码审查工具"}),l.jsx("li",{children:"文档修改追踪"}),l.jsx("li",{children:"内容校对工具"})]})]})]})]})}export{He as default};
