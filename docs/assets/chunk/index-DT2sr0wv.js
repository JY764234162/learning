import{bK as oe,bL as te,bM as ie,bN as se,bO as le,bP as H,bQ as ue,bR as ae,F as re,bS as ne,bT as ce,bU as fe,bV as ve,bW as V,N as de,r as U,j as l,T as he}from"../../main-C6dAISBj.js";import{A as me}from"./index-Di2rM6Xc.js";import{S as G}from"./index-CJbs0laJ.js";import{C as $}from"./index-kwDjKeF6.js";import{I as ge}from"./index-CYLsWLvc.js";import"./ExclamationCircleFilled-CTGa2gPI.js";import"./InfoCircleFilled-XyC6P2na.js";import"./Input-D1NOC7aK.js";import"./EyeOutlined-BJjmCuKL.js";import"./SearchOutlined-UwWnO4wl.js";const pe=r=>{const e=r?.algorithm?oe(r.algorithm):te,n=Object.assign(Object.assign({},ie),r?.token);return se(n,{override:r?.token},e,le)};function xe(r){const{sizeUnit:e,sizeStep:n}=r,o=n-2;return{sizeXXL:e*(o+10),sizeXL:e*(o+6),sizeLG:e*(o+2),sizeMD:e*(o+2),sizeMS:e*(o+1),size:e*o,sizeSM:e*o,sizeXS:e*(o-1),sizeXXS:e*(o-1)}}const Ce=(r,e)=>{const n=e??H(r),o=n.fontSizeSM,i=n.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),xe(e??r)),ue(o)),{controlHeight:i}),ae(Object.assign(Object.assign({},n),{controlHeight:i})))},m=(r,e)=>new re(r).setA(e).toRgbString(),j=(r,e)=>new re(r).lighten(e).toHexString(),ye=r=>{const e=ne(r,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},Te=(r,e)=>{const n=r||"#000",o=e||"#fff";return{colorBgBase:n,colorTextBase:o,colorText:m(o,.85),colorTextSecondary:m(o,.65),colorTextTertiary:m(o,.45),colorTextQuaternary:m(o,.25),colorFill:m(o,.18),colorFillSecondary:m(o,.12),colorFillTertiary:m(o,.08),colorFillQuaternary:m(o,.04),colorBgSolid:m(o,.95),colorBgSolidHover:m(o,1),colorBgSolidActive:m(o,.9),colorBgElevated:j(n,12),colorBgContainer:j(n,8),colorBgLayout:j(n,0),colorBgSpotlight:j(n,26),colorBgBlur:m(o,.04),colorBorder:j(n,26),colorBorderSecondary:j(n,19)}},je=(r,e)=>{const n=Object.keys(ce).map(t=>{const s=ne(r[t],{theme:"dark"});return Array.from({length:10},()=>1).reduce((a,u,c)=>(a[`${t}-${c+1}`]=s[c],a[`${t}${c+1}`]=s[c],a),{})}).reduce((t,s)=>(t=Object.assign(Object.assign({},t),s),t),{}),o=e??H(r),i=fe(r,{generateColorPalettes:ye,generateNeutralColorPalettes:Te});return Object.assign(Object.assign(Object.assign(Object.assign({},o),n),i),{colorPrimaryBg:i.colorPrimaryBorder,colorPrimaryBgHover:i.colorPrimaryBorderHover})};function Oe(){const[r,e,n]=de();return{theme:r,token:e,hashId:n}}const ze={defaultSeed:V.token,useToken:Oe,defaultAlgorithm:H,darkAlgorithm:je,compactAlgorithm:Ce,getDesignToken:pe,defaultConfig:V,_internalContext:ve};function g(){}g.prototype={diff:function(e,n){var o,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=i.callback;typeof i=="function"&&(t=i,i={});var s=this;function a(d){return d=s.postProcess(d,i),t?(setTimeout(function(){t(d)},0),!0):d}e=this.castInput(e,i),n=this.castInput(n,i),e=this.removeEmpty(this.tokenize(e,i)),n=this.removeEmpty(this.tokenize(n,i));var u=n.length,c=e.length,f=1,v=u+c;i.maxEditLength!=null&&(v=Math.min(v,i.maxEditLength));var y=(o=i.timeout)!==null&&o!==void 0?o:1/0,x=Date.now()+y,h=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(h[0],n,e,0,i);if(h[0].oldPos+1>=c&&p+1>=u)return a(Z(s,h[0].lastComponent,n,e,s.useLongestToken));var O=-1/0,z=1/0;function k(){for(var d=Math.max(O,-f);d<=Math.min(z,f);d+=2){var T=void 0,w=h[d-1],E=h[d+1];w&&(h[d-1]=void 0);var S=!1;if(E){var X=E.oldPos-d;S=E&&0<=X&&X<u}var Q=w&&w.oldPos+1<c;if(!S&&!Q){h[d]=void 0;continue}if(!Q||S&&w.oldPos<E.oldPos?T=s.addToPath(E,!0,!1,0,i):T=s.addToPath(w,!1,!0,1,i),p=s.extractCommon(T,n,e,d,i),T.oldPos+1>=c&&p+1>=u)return a(Z(s,T.lastComponent,n,e,s.useLongestToken));h[d]=T,T.oldPos+1>=c&&(z=Math.min(z,d-1)),p+1>=u&&(O=Math.max(O,d+1))}f++}if(t)(function d(){setTimeout(function(){if(f>v||Date.now()>x)return t();k()||d()},0)})();else for(;f<=v&&Date.now()<=x;){var D=k();if(D)return D}},addToPath:function(e,n,o,i,t){var s=e.lastComponent;return s&&!t.oneChangePerToken&&s.added===n&&s.removed===o?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:n,removed:o,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:o,previousComponent:s}}},extractCommon:function(e,n,o,i,t){for(var s=n.length,a=o.length,u=e.oldPos,c=u-i,f=0;c+1<s&&u+1<a&&this.equals(o[u+1],n[c+1],t);)c++,u++,f++,t.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!t.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,c},equals:function(e,n,o){return o.comparator?o.comparator(e,n):e===n||o.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],o=0;o<e.length;o++)e[o]&&n.push(e[o]);return n},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function Z(r,e,n,o,i){for(var t=[],s;e;)t.push(e),s=e.previousComponent,delete e.previousComponent,e=s;t.reverse();for(var a=0,u=t.length,c=0,f=0;a<u;a++){var v=t[a];if(v.removed)v.value=r.join(o.slice(f,f+v.count)),f+=v.count;else{if(!v.added&&i){var y=n.slice(c,c+v.count);y=y.map(function(x,h){var p=o[f+h];return p.length>x.length?p:x}),v.value=r.join(y)}else v.value=r.join(n.slice(c,c+v.count));c+=v.count,v.added||(f+=v.count)}}return t}function Y(r,e){var n;for(n=0;n<r.length&&n<e.length;n++)if(r[n]!=e[n])return r.slice(0,n);return r.slice(0,n)}function _(r,e){var n;if(!r||!e||r[r.length-1]!=e[e.length-1])return"";for(n=0;n<r.length&&n<e.length;n++)if(r[r.length-(n+1)]!=e[e.length-(n+1)])return r.slice(-n);return r.slice(-n)}function N(r,e,n){if(r.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+r.slice(e.length)}function P(r,e,n){if(!e)return r+n;if(r.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return r.slice(0,-e.length)+n}function B(r,e){return N(r,e,"")}function A(r,e){return P(r,e,"")}function W(r,e){return e.slice(0,we(r,e))}function we(r,e){var n=0;r.length>e.length&&(n=r.length-e.length);var o=e.length;r.length<e.length&&(o=r.length);var i=Array(o),t=0;i[0]=0;for(var s=1;s<o;s++){for(e[s]==e[t]?i[s]=i[t]:i[s]=t;t>0&&e[s]!=e[t];)t=i[t];e[s]==e[t]&&t++}t=0;for(var a=n;a<r.length;a++){for(;t>0&&r[a]!=e[t];)t=i[t];r[a]==e[t]&&t++}return t}var I="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ee=new RegExp("[".concat(I,"]+|\\s+|[^").concat(I,"]"),"ug"),b=new g;b.equals=function(r,e,n){return n.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),r.trim()===e.trim()};b.tokenize=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(r),function(t){return t.segment})}else n=r.match(Ee)||[];var o=[],i=null;return n.forEach(function(t){/\s/.test(t)?i==null?o.push(t):o.push(o.pop()+t):/\s/.test(i)?o[o.length-1]==i?o.push(o.pop()+t):o.push(i+t):o.push(t),i=t}),o};b.join=function(r){return r.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};b.postProcess=function(r,e){if(!r||e.oneChangePerToken)return r;var n=null,o=null,i=null;return r.forEach(function(t){t.added?o=t:t.removed?i=t:((o||i)&&K(n,i,o,t),n=t,o=null,i=null)}),(o||i)&&K(n,i,o,null),r};function Be(r,e,n){return b.diff(r,e,n)}function K(r,e,n,o){if(e&&n){var i=e.value.match(/^\s*/)[0],t=e.value.match(/\s*$/)[0],s=n.value.match(/^\s*/)[0],a=n.value.match(/\s*$/)[0];if(r){var u=Y(i,s);r.value=P(r.value,s,u),e.value=B(e.value,u),n.value=B(n.value,u)}if(o){var c=_(t,a);o.value=N(o.value,a,c),e.value=A(e.value,c),n.value=A(n.value,c)}}else if(n)r&&(n.value=n.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(r&&o){var f=o.value.match(/^\s*/)[0],v=e.value.match(/^\s*/)[0],y=e.value.match(/\s*$/)[0],x=Y(f,v);e.value=B(e.value,x);var h=_(B(f,x),y);e.value=A(e.value,h),o.value=N(o.value,f,h),r.value=P(r.value,f,f.slice(0,f.length-h.length))}else if(o){var p=o.value.match(/^\s*/)[0],O=e.value.match(/\s*$/)[0],z=W(O,p);e.value=A(e.value,z)}else if(r){var k=r.value.match(/\s*$/)[0],D=e.value.match(/^\s*/)[0],d=W(k,D);e.value=B(e.value,d)}}var Le=new g;Le.tokenize=function(r){var e=new RegExp("(\\r?\\n)|[".concat(I,"]+|[^\\S\\n\\r]+|[^").concat(I,"]"),"ug");return r.match(e)||[]};var J=new g;J.tokenize=function(r,e){e.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var n=[],o=r.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var i=0;i<o.length;i++){var t=o[i];i%2&&!e.newlineIsToken?n[n.length-1]+=t:n.push(t)}return n};J.equals=function(r,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),g.prototype.equals.call(this,r,e,n)};var be=new g;be.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var ke=new g;ke.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function R(r){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(r)}var L=new g;L.useLongestToken=!0;L.tokenize=J.tokenize;L.castInput=function(r,e){var n=e.undefinedReplacement,o=e.stringifyReplacer,i=o===void 0?function(t,s){return typeof s>"u"?n:s}:o;return typeof r=="string"?r:JSON.stringify(F(r,null,null,i),i,"  ")};L.equals=function(r,e,n){return g.prototype.equals.call(L,r.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function F(r,e,n,o,i){e=e||[],n=n||[],o&&(r=o(i,r));var t;for(t=0;t<e.length;t+=1)if(e[t]===r)return n[t];var s;if(Object.prototype.toString.call(r)==="[object Array]"){for(e.push(r),s=new Array(r.length),n.push(s),t=0;t<r.length;t+=1)s[t]=F(r[t],e,n,o,i);return e.pop(),n.pop(),s}if(r&&r.toJSON&&(r=r.toJSON()),R(r)==="object"&&r!==null){e.push(r),s={},n.push(s);var a=[],u;for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&a.push(u);for(a.sort(),t=0;t<a.length;t+=1)u=a[t],s[u]=F(r[u],e,n,o,u);e.pop(),n.pop()}else s=r;return s}var q=new g;q.tokenize=function(r){return r.slice()};q.join=q.removeEmpty=function(r){return r};const{Title:De,Paragraph:M,Text:C}=he,{TextArea:ee}=ge;function He(){const{token:r}=ze.useToken(),[e,n]=U.useState("beep boop"),[o,i]=U.useState("beep boob blah"),t=Be(e,o);console.log(t);const s=a=>a.map((u,c)=>{const f=u.added?r.colorSuccess:u.removed?r.colorError:"inherit",v=u.added?r.colorSuccessBg:u.removed?r.colorErrorBg:"transparent";return l.jsx("span",{style:{color:f,backgroundColor:v,padding:"0 4px",margin:"0 2px",borderRadius:"2px"},children:u.value},c)});return l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[l.jsx(De,{level:2,children:"字符串差异对比"}),l.jsx(me,{type:"info",message:"什么是字符串差异对比？",description:"字符串差异对比是一种用于比较两段文本之间差异的工具。它能够精确地显示出文本中添加、删除或保持不变的部分，广泛应用于代码审查、文档版本控制等场景。",showIcon:!0,style:{marginBottom:"20px"}}),l.jsxs(G,{direction:"vertical",size:"large",style:{width:"100%"},children:[l.jsx($,{title:"输入区域",children:l.jsxs(G,{direction:"vertical",style:{width:"100%"},children:[l.jsxs("div",{children:[l.jsx(C,{strong:!0,children:"文本 1："}),l.jsx(ee,{value:e,onChange:a=>n(a.target.value),rows:3,placeholder:"请输入第一段文本"})]}),l.jsxs("div",{children:[l.jsx(C,{strong:!0,children:"文本 2："}),l.jsx(ee,{value:o,onChange:a=>i(a.target.value),rows:3,placeholder:"请输入第二段文本"})]})]})}),l.jsx($,{title:"对比结果",children:l.jsx("div",{className:"diff-result",children:s(t)})}),l.jsxs($,{title:"功能说明",children:[l.jsx(M,{children:l.jsx(C,{strong:!0,children:"实现原理："})}),l.jsxs("ul",{children:[l.jsx("li",{children:"使用 diff 库进行文本差异分析"}),l.jsx("li",{children:"支持单词级别的差异对比"}),l.jsx("li",{children:"通过颜色标注展示修改内容"}),l.jsx("li",{children:"实时动态对比更新"})]}),l.jsx(M,{children:l.jsx(C,{strong:!0,children:"颜色说明："})}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx(C,{style:{backgroundColor:r.colorSuccessBg,color:r.colorSuccess},children:"绿色背景：新增内容"})}),l.jsx("li",{children:l.jsx(C,{style:{backgroundColor:r.colorErrorBg,color:r.colorError},children:"红色背景：删除内容"})}),l.jsx("li",{children:l.jsx(C,{children:"无背景：相同内容"})})]}),l.jsx(M,{children:l.jsx(C,{strong:!0,children:"应用场景："})}),l.jsxs("ul",{children:[l.jsx("li",{children:"文本版本对比"}),l.jsx("li",{children:"代码审查工具"}),l.jsx("li",{children:"文档修改追踪"}),l.jsx("li",{children:"内容校对工具"})]})]})]})]})}export{He as default};
