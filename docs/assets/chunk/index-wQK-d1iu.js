import{l as j,r,C as K,c as D,n as Oe,g as ze,m as Ne,f as x,e as Le,o as Be,i as _e,p as te,S as Re,I as se,j as c,T as Me,B as ne}from"../../main-CRe4Yinv.js";import{A as De}from"./index-B6dkUw-E.js";import{S as V}from"./index-Dnivcq-t.js";import{C as ie}from"./index-B9SH_yGS.js";import{R as Te}from"./InboxOutlined-BEwkBm9t.js";import{R as Fe}from"./UploadOutlined-B2JCyT4e.js";import{P as He,F as We,a as Ge}from"./FolderOutlined-JLSbtzBt.js";import{m as Ae}from"./extendsObject-78o_rR5W.js";import{u as Xe,r as ae}from"./useBreakpoint--HSaInQU.js";import{D as ke}from"./index-iTOMgsNa.js";import{C as Ve,R as Ue}from"./row-CiOWDV5P.js";import{P as Ze,U as Je}from"./index-DQuZCMng.js";import{s as Ke}from"./index-tSiRIdBA.js";import"./ExclamationCircleFilled-nbeej0ms.js";import"./InfoCircleFilled-DBJ-ENMQ.js";import"./useForceUpdate-j9ZvleN1.js";import"./PurePanel-cQ2yDfnX.js";import"./SearchOutlined-CaxMxbev.js";import"./index-Dut9ob2r.js";import"./fade-zhkkvuJ2.js";import"./DownloadOutlined-DTidZHln.js";import"./EyeOutlined-hs1Ju4mR.js";const q=j.createContext({});q.Consumer;var le=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};const qe=t=>{var{prefixCls:e,className:n,avatar:i,title:o,description:g}=t,u=le(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:P}=r.useContext(K),y=P("list",e),N=D(`${y}-item-meta`,n),I=j.createElement("div",{className:`${y}-item-meta-content`},o&&j.createElement("h4",{className:`${y}-item-meta-title`},o),g&&j.createElement("div",{className:`${y}-item-meta-description`},g));return j.createElement("div",Object.assign({},u,{className:N}),i&&j.createElement("div",{className:`${y}-item-meta-avatar`},i),(o||g)&&I)},Ye=j.forwardRef((t,e)=>{const{prefixCls:n,children:i,actions:o,extra:g,styles:u,className:P,classNames:y,colStyle:N}=t,I=le(t,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:w,itemLayout:$}=r.useContext(q),{getPrefixCls:L,list:v}=r.useContext(K),O=h=>{var S,B;return D((B=(S=v?.item)===null||S===void 0?void 0:S.classNames)===null||B===void 0?void 0:B[h],y?.[h])},a=h=>{var S,B;return Object.assign(Object.assign({},(B=(S=v?.item)===null||S===void 0?void 0:S.styles)===null||B===void 0?void 0:B[h]),u?.[h])},d=()=>{let h=!1;return r.Children.forEach(i,S=>{typeof S=="string"&&(h=!0)}),h&&r.Children.count(i)>1},s=()=>$==="vertical"?!!g:!d(),l=L("list",n),m=o&&o.length>0&&j.createElement("ul",{className:D(`${l}-item-action`,O("actions")),key:"actions",style:a("actions")},o.map((h,S)=>j.createElement("li",{key:`${l}-item-action-${S}`},h,S!==o.length-1&&j.createElement("em",{className:`${l}-item-action-split`})))),p=w?"div":"li",b=j.createElement(p,Object.assign({},I,w?{}:{ref:e},{className:D(`${l}-item`,{[`${l}-item-no-flex`]:!s()},P)}),$==="vertical"&&g?[j.createElement("div",{className:`${l}-item-main`,key:"content"},i,m),j.createElement("div",{className:D(`${l}-item-extra`,O("extra")),key:"extra",style:a("extra")},g)]:[i,m,Oe(g,{key:"extra"})]);return w?j.createElement(Ve,{ref:e,flex:1,style:N},b):b}),ce=Ye;ce.Meta=qe;const Qe=t=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:g,itemPaddingLG:u,marginLG:P,borderRadiusLG:y}=t;return{[e]:{border:`${x(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:y,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${x(o)} ${x(P)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:g}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:u}}}},et=t=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:g,margin:u}=t;return{[`@media screen and (max-width:${i}px)`]:{[e]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[e]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:g}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:t.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${x(u)}`}}}}}},tt=t=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:g,marginLG:u,padding:P,itemPadding:y,colorPrimary:N,itemPaddingSM:I,itemPaddingLG:w,paddingXS:$,margin:L,colorText:v,colorTextDescription:O,motionDurationSlow:a,lineWidth:d,headerBg:s,footerBg:l,emptyTextPadding:m,metaMarginBottom:p,avatarMarginRight:b,titleMarginBottom:h,descriptionFontSize:S}=t;return{[e]:Object.assign(Object.assign({},Le(t)),{position:"relative","--rc-virtual-list-scrollbar-bg":t.colorSplit,"*":{outline:"none"},[`${e}-header`]:{background:s},[`${e}-footer`]:{background:l},[`${e}-header, ${e}-footer`]:{paddingBlock:g},[`${e}-pagination`]:{marginBlockStart:u,[`${n}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:y,color:v,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:b},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:v},[`${e}-item-meta-title`]:{margin:`0 0 ${x(t.marginXXS)} 0`,color:v,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:v,transition:`all ${a}`,"&:hover":{color:N}}},[`${e}-item-meta-description`]:{color:O,fontSize:S,lineHeight:t.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${x($)}`,color:O,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:d,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${e}-empty`]:{padding:`${x(P)} 0`,color:O,fontSize:t.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:m,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:L,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:u},[`${e}-item-meta`]:{marginBlockEnd:p,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:h,color:v,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:P,marginInlineStart:"auto","> li":{padding:`0 ${x(P)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${x(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${x(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${x(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${x(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:w},[`${e}-sm ${e}-item`]:{padding:I},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},nt=t=>({contentWidth:220,itemPadding:`${x(t.paddingContentVertical)} 0`,itemPaddingSM:`${x(t.paddingContentVerticalSM)} ${x(t.paddingContentHorizontal)}`,itemPaddingLG:`${x(t.paddingContentVerticalLG)} ${x(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),it=ze("List",t=>{const e=Ne(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[tt(e),Qe(e),et(e)]},nt);var at=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};function rt(t,e){const{pagination:n=!1,prefixCls:i,bordered:o=!1,split:g=!0,className:u,rootClassName:P,style:y,children:N,itemLayout:I,loadMore:w,grid:$,dataSource:L=[],size:v,header:O,footer:a,loading:d=!1,rowKey:s,renderItem:l,locale:m}=t,p=at(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),b=n&&typeof n=="object"?n:{},[h,S]=r.useState(b.defaultCurrent||1),[B,de]=r.useState(b.defaultPageSize||10),{getPrefixCls:me,direction:ge,className:pe,style:fe}=Be("list"),{renderEmpty:W}=r.useContext(K),ue={current:1,total:0,position:"bottom"},Y=f=>(E,_)=>{var k;S(E),de(_),n&&((k=n?.[f])===null||k===void 0||k.call(n,E,_))},$e=Y("onChange"),he=Y("onShowSizeChange"),ye=(f,E)=>{if(!l)return null;let _;return typeof s=="function"?_=s(f):s?_=f[s]:_=f.key,_||(_=`list-item-${E}`),r.createElement(r.Fragment,{key:_},l(f,E))},xe=!!(w||n||a),C=me("list",i),[ve,Se,be]=it(C);let R=d;typeof R=="boolean"&&(R={spinning:R});const G=!!R?.spinning,Ce=_e(v);let T="";switch(Ce){case"large":T="lg";break;case"small":T="sm";break}const je=D(C,{[`${C}-vertical`]:I==="vertical",[`${C}-${T}`]:T,[`${C}-split`]:g,[`${C}-bordered`]:o,[`${C}-loading`]:G,[`${C}-grid`]:!!$,[`${C}-something-after-last-item`]:xe,[`${C}-rtl`]:ge==="rtl"},pe,u,P,Se,be),z=Ae(ue,{total:L.length,current:h,pageSize:B},n||{}),Pe=Math.ceil(z.total/z.pageSize);z.current=Math.min(z.current,Pe);const Q=n&&r.createElement("div",{className:D(`${C}-pagination`)},r.createElement(He,Object.assign({align:"end"},z,{onChange:$e,onShowSizeChange:he})));let A=te(L);n&&L.length>(z.current-1)*z.pageSize&&(A=te(L).splice((z.current-1)*z.pageSize,z.pageSize));const Ee=Object.keys($||{}).some(f=>["xs","sm","md","lg","xl","xxl"].includes(f)),ee=Xe(Ee),F=r.useMemo(()=>{for(let f=0;f<ae.length;f+=1){const E=ae[f];if(ee[E])return E}},[ee]),Ie=r.useMemo(()=>{if(!$)return;const f=F&&$[F]?$[F]:$.column;if(f)return{width:`${100/f}%`,maxWidth:`${100/f}%`}},[JSON.stringify($),F]);let X=G&&r.createElement("div",{style:{minHeight:53}});if(A.length>0){const f=A.map(ye);X=$?r.createElement(Ue,{gutter:$.gutter},r.Children.map(f,E=>r.createElement("div",{key:E?.key,style:Ie},E))):r.createElement("ul",{className:`${C}-items`},f)}else!N&&!G&&(X=r.createElement("div",{className:`${C}-empty-text`},m?.emptyText||W?.("List")||r.createElement(ke,{componentName:"List"})));const H=z.position,we=r.useMemo(()=>({grid:$,itemLayout:I}),[JSON.stringify($),I]);return ve(r.createElement(q.Provider,{value:we},r.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},fe),y),className:je},p),(H==="top"||H==="both")&&Q,O&&r.createElement("div",{className:`${C}-header`},O),r.createElement(Re,Object.assign({},R),X,N),a&&r.createElement("div",{className:`${C}-footer`},a),w||(H==="bottom"||H==="both")&&Q)))}const ot=r.forwardRef(rt),U=ot;U.Item=ce;function Z(){return Z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Z.apply(this,arguments)}const st=(t,e)=>r.createElement(se,Z({},t,{ref:e,icon:We})),lt=r.forwardRef(st);function J(){return J=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},J.apply(this,arguments)}const ct=(t,e)=>r.createElement(se,J({},t,{ref:e,icon:Ge})),re=r.forwardRef(ct),dt="_dropZone_1lbkh_1",mt="_dragging_1lbkh_13",gt="_uploadIcon_1lbkh_17",pt="_fileList_1lbkh_22",ft="_fileItem_1lbkh_25",ut="_fileProgress_1lbkh_32",M={dropZone:dt,dragging:mt,uploadIcon:gt,fileList:pt,fileItem:ft,fileProgress:ut},{Title:oe,Paragraph:$t,Text:ht}=Me,{Dragger:Ht}=Je,Wt=()=>{const[t,e]=r.useState([]),[n,i]=r.useState(!1),o=r.useRef(null),g=r.useRef(null),u=async(a,d="")=>{const s={name:a.name,size:a.size,type:a.type,path:d?`${d}/${a.name}`:a.name,status:"uploading",progress:0};e(l=>[...l,s]);try{const l=new FormData;l.append("file",a),l.append("path",d);const m=10;for(let p=0;p<=m;p++)await new Promise(b=>setTimeout(b,200)),e(b=>b.map(h=>h.path===s.path?{...h,progress:p/m*100}:h));e(p=>p.map(b=>b.path===s.path?{...b,status:"done",progress:100}:b))}catch{e(m=>m.map(p=>p.path===s.path?{...p,status:"error",progress:0}:p)),Ke.error(`文件 ${a.name} 上传失败`)}},P=async a=>{const d=a.target.files;if(d){for(let s=0;s<d.length;s++){const l=d[s];await u(l)}a.target.value=""}},y=async a=>{const d=a.target.files;if(d){for(let s=0;s<d.length;s++){const l=d[s],m=l.webkitRelativePath.split("/").slice(0,-1).join("/");await u(l,m)}a.target.value=""}},N=()=>{o.current?.click()},I=()=>{g.current?.click()},w=async(a,d="")=>{if(a.isFile){const s=await new Promise(l=>{a.file(l)});await u(s,d)}else if(a.isDirectory){const s=a.createReader(),l=await new Promise(m=>{s.readEntries(p=>m(p))});for(const m of l){const p=d?`${d}/${m.name}`:m.name;await w(m,p)}}},$=r.useCallback(async a=>{a.preventDefault(),i(!1);const d=a.dataTransfer.items;if(d)for(let s=0;s<d.length;s++){const m=d[s].webkitGetAsEntry();m&&await w(m)}},[]),L=r.useCallback(a=>{a.preventDefault(),i(!0)},[]),v=r.useCallback(a=>{a.preventDefault(),i(!1)},[]),O=()=>c.jsx(U,{className:M.fileList,dataSource:t,renderItem:a=>c.jsx(U.Item,{children:c.jsxs("div",{className:M.fileItem,children:[c.jsxs(V,{children:[a.type.includes("directory")?c.jsx(re,{}):c.jsx(lt,{}),c.jsx(ht,{children:a.path})]}),c.jsx("div",{className:M.fileProgress,children:c.jsx(Ze,{percent:a.progress,status:a.status==="error"?"exception":void 0,size:"small"})})]})})});return c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[c.jsx(oe,{level:2,children:"文件上传演示"}),c.jsx(De,{type:"info",message:"支持多种上传方式",description:"您可以通过拖拽上传、选择文件或选择文件夹的方式上传内容。支持递归上传文件夹中的所有文件。",showIcon:!0,style:{marginBottom:"20px"}}),c.jsxs(V,{direction:"vertical",style:{width:"100%"},children:[c.jsx(ie,{children:c.jsxs("div",{className:`${M.dropZone} ${n?M.dragging:""}`,onDrop:$,onDragOver:L,onDragLeave:v,children:[c.jsx(Te,{className:M.uploadIcon}),c.jsx(oe,{level:4,children:"拖拽文件或文件夹到此处上传"}),c.jsx($t,{type:"secondary",children:"或者使用下方按钮选择文件/文件夹"}),c.jsx("input",{type:"file",ref:o,onChange:P,multiple:!0,style:{display:"none"}}),c.jsx("input",{type:"file",ref:g,onChange:y,webkitdirectory:"",style:{display:"none"}}),c.jsxs(V,{className:M.uploadButtons,children:[c.jsx(ne,{type:"primary",icon:c.jsx(Fe,{}),onClick:N,children:"选择文件"}),c.jsx(ne,{icon:c.jsx(re,{}),onClick:I,children:"选择文件夹"})]})]})}),t.length>0&&c.jsx(ie,{title:"上传列表",children:O()})]})]})};export{Wt as default};
