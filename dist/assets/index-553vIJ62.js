import{R as a,r as l,j as c}from"./index-Cpi3xnDM.js";const f=t=>{let e;const o=new Set,s=(i,g)=>{const r=typeof i=="function"?i(e):i;if(!Object.is(r,e)){const m=e;e=g??(typeof r!="object"||r===null)?r:Object.assign({},e,r),o.forEach(x=>x(e,m))}},n=()=>e,d={setState:s,getState:n,getInitialState:()=>h,subscribe:i=>(o.add(i),()=>o.delete(i))},h=e=t(s,n,d);return d},S=t=>t?f(t):f,j=t=>t;function y(t,e=j){const o=a.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return a.useDebugValue(o),o}const p=t=>{const e=S(t),o=s=>y(e,s);return Object.assign(o,e),o},v=t=>t?p(t):p,b=v((t,e)=>({count:0,loading:!1,increment:async()=>{if(e().loading)return;const s=Math.random()*5*1e3;t({loading:!0});const n=await new Promise(u=>setTimeout(()=>u(s),s));t({count:n,loading:!1})}})),w=()=>{const{count:t,loading:e}=b();return e?c.jsx("div",{children:"Loading..."}):c.jsxs("div",{children:[c.jsx("span",{children:"Child"}),c.jsx("span",{children:t})]})},C=l.memo(w);function R(){const{increment:t}=b(),e=l.useRef(null),[o,s]=a.useState(100);return l.useLayoutEffect(()=>{var n;(n=e.current)==null||n.focus()},[]),c.jsxs("div",{style:{width:"100%"},children:[c.jsx("input",{ref:e,onClick:t}),c.jsx("div",{className:"node-box",contentEditable:!0,"aria-placeholder":"123",style:{border:"1px solid black",borderRadius:"8",width:o},onClick:()=>{s(n=>n+50)},onWheelCapture:n=>{console.log("wheel capture"),n.preventDefault(),n.stopPropagation()},onWheel:n=>{console.log("wheel"),n.preventDefault(),n.stopPropagation()},id:"animate",onTransitionEnd:()=>{console.log("结束了")}}),c.jsx(C,{})]})}export{R as default};
