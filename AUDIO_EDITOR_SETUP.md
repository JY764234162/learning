# 音频编辑器安装说明

## 安装步骤

音频编辑器页面已创建完成，但需要安装相关依赖才能正常使用。

### 1. 安装 wavesurfer.js

在项目根目录运行以下命令：

```bash
cd /Users/jiangyi/Desktop/study/learning/packages/web
pnpm add wavesurfer.js
```

如果 pnpm 出现存储位置问题，可以尝试：

**方法 1：清理并重新安装**
```bash
pnpm install
pnpm add wavesurfer.js
```

**方法 2：使用 npm**
```bash
npm install wavesurfer.js
```

**方法 3：使用 yarn**
```bash
yarn add wavesurfer.js
```

### 2. 访问音频编辑器

安装完成后，启动开发服务器：

```bash
pnpm run dev
```

然后在浏览器中访问：**编辑器 → 音频编辑器**

## 功能预览

✅ **已实现的功能：**
- 音频文件上传（支持拖拽）
- 实时波形可视化
- 播放/暂停控制
- 音量调节（0-100%）
- 播放速度调节（0.25x-2x）
- 波形缩放
- 添加可编辑选区
- 选区剪切和导出
- 完整音频导出（WAV格式）
- 时间显示和进度跟踪

## 使用提示

1. **支持的音频格式**：MP3、WAV、OGG、M4A 等
2. **选区操作**：
   - 点击"添加选区"创建选区
   - 拖动选区边缘调整范围
   - 拖动选区中间移动位置
   - 点击"播放"预览选区
   - 点击"导出"保存选区为独立文件
3. **导出格式**：所有导出的音频都是 WAV 格式（未压缩）

## 故障排除

### 问题：pnpm 安装失败
**解决方案**：
```bash
# 清理 pnpm 缓存
pnpm store prune

# 重新安装依赖
pnpm install

# 安装 wavesurfer.js
pnpm add wavesurfer.js
```

### 问题：音频无法播放
**可能原因**：
1. 浏览器需要用户手势才能播放音频（点击播放按钮即可）
2. 音频文件损坏或格式不支持
3. 浏览器版本过旧

**解决方案**：
- 使用最新版本的 Chrome、Firefox 或 Edge 浏览器
- 确保音频文件完整且格式正确

### 问题：导出的音频文件过大
**原因**：WAV 格式是未压缩的音频格式
**解决方案**：可以使用其他工具将导出的 WAV 文件转换为 MP3 等压缩格式

## 技术细节

- **前端框架**：React 18
- **音频库**：WaveSurfer.js 7.x
- **音频处理**：Web Audio API
- **UI 库**：Ant Design 5.x

## 下一步优化建议

如需更强大的功能，可以考虑添加：
- 多轨道混音
- 音效处理（淡入淡出、混响、均衡器）
- 频谱分析器
- 支持更多导出格式（需要服务端支持）
- 撤销/重做功能
- 音频降噪
